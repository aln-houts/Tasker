<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To-Do Stack</title>
  <!-- Bootstrap CSS -->
  <link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<style>
  /* In style.css */
.task-card-datetime {
    font-size: 0.8em; /* Smaller font size */
    color: #555;      /* A slightly muted color */
    margin-top: 5px;
    margin-bottom: 8px; /* Add some spacing */
    /* Add any other styles you want */
}
.task-header {             /* already flex from JS; just be explicit */
  display:flex;
  align-items:flex-start;
}

.task-title {
  overflow:hidden;
  text-overflow:ellipsis;  /* prevents long titles from pushing content */
  white-space:nowrap;
}

.task-controls button {
  width:36px;              /* uniform round buttons */
  height:36px;
  display:grid;
  place-items:center;
}

.task-card.expanded .task-body {
  max-height:600px;        /* whatever size you prefer */
}

.task-card:not(.expanded) .task-body {
  max-height:0;
  overflow:hidden;
  transition:max-height .25s ease;
}

/* You might want to adjust padding or margins for .card-content if needed */
.task-card .card-content {
    padding: 10px;
    /* Potentially adjust if the new datetime element affects layout */
}

/* Your existing .task-image-preview and .task-image-preview.expanded styles */
.task-image-preview {
    object-fit: cover;
    border-radius: 4px;
    margin-top: 5px;
    transition: max-width 0.3s ease, max-height 0.3s ease; /* Smooth transition */
}

.task-image-preview.expanded {
    max-width: 100%; /* Larger image when card is expanded */
    max-height: 200px; /* Adjust as needed */
}
  .task-details img {
  display: block;
  margin: 0.5rem auto;   /* vertical gap + auto-horizontal centering */
  max-width: 80%;        /* scale up to 80% of container width */
  height: auto;          /* preserve aspect ratio */
  }
  #addTaskForm {
    transform: translateY(100%);
    transition: transform .3s ease-in-out;
    z-index: 1050;
  }
  #addTaskForm.show { transform: translateY(0); }
  /* Pastel backgrounds */
  .bg-blue-200   { background:#bfdbfe!important }
  .bg-pink-200   { background:#fbcfe8!important }
  .bg-orange-200 { background:#fed7aa!important }
  .bg-purple-200 { background:#e9d5ff!important }
</style>
</head>
<!-- =========  HEADER  ========= -->
<header class="bg-dark text-white p-3 d-flex flex-column flex-md-row align-items-start align-items-md-center gap-3">
  <!-- App title -->
  <h1 class="h4 mb-0 flex-shrink-0">Tasker</h1>
  <!-- Backup / Restore controls -->
  <div class="d-flex flex-wrap align-items-center gap-2">
    <button id="exportBtn"  class="btn btn-outline-light btn-sm">Backup Tasks</button>

    <input  type="file" id="importInput" accept=".json" hidden />
    <button id="importBtn"  class="btn btn-outline-light btn-sm">Restore Tasks</button>
  </div>
  <!-- Category Filter Bar -->
  <div id="filterBar" class="btn-group btn-group-sm ms-md-auto" role="group">
    <button class="btn btn-outline-light"    onclick="filterTasks('all')">All</button>
    <button class="btn btn-outline-primary"  onclick="filterTasks('event')">Events</button>
    <button class="btn btn-outline-primary"     onclick="filterTasks('daily')">Daily</button>
    <button class="btn btn-outline-primary"  onclick="filterTasks('project')">Projects</button>
    <button class="btn btn-outline-primary"   onclick="filterTasks('personal')">Personal</button>
  </div>

</header>
<!-- ======== /HEADER ========= -->

<body class="bg-dark text-white vh-100 d-flex flex-column overflow-hidden">

  <!-- Task List -->
  <div id="taskStack" class="flex-grow-1 overflow-auto p-4 d-flex flex-column gap-3">
    <!-- Task cards will be injected here -->
  </div>

 <!-- Slide-up Form -->
 <div id="addTaskForm" class="position-fixed bottom-0 start-0 w-100 bg-dark p-4 shadow">
  <!-- Tab Button -->
  <button id="toggleFormBtn" class="btn btn-secondary w-100 mb-3" onclick="toggleForm()">Add New Task</button>

  <div id="formContent" class="d-none">
    <select id="taskCategory" class="form-select mb-3 bg-secondary text-white">
      <option value="" disabled selected>Select category</option>
      <option value="event">Event</option>
      <option value="daily">Daily</option>
      <option value="project">Project</option>
      <option value="personal">Personal</option>
    </select>
    <div id="formBody" class="d-none">
      <div class="mb-2">
        <label for="taskTitle" class="form-label text-white">Title</label>
        <input id="taskTitle" class="form-control bg-secondary text-white" placeholder="Task Title">
      </div>

      <!-- Dynamic Fields -->
      <div id="field-details" class="mb-2 d-none">
        <label for="taskDetails" class="form-label text-white">Details</label>
        <textarea id="taskDetails" class="form-control bg-secondary text-white" rows="2"></textarea>
      </div>
      <div id="field-date" class="mb-2 d-none">
        <label for="taskDate" class="form-label text-white">Date</label>
        <input type="date" id="taskDate" class="form-control bg-secondary text-white" />
      </div>
      <div id="field-time" class="mb-2 d-none">
        <label for="taskTime" class="form-label text-white">Time</label>
        <select id="taskTime" class="form-select bg-secondary text-white">
          <option value="" disabled selected>Select time</option>
        </select>
      </div>
      <div id="field-due-date" class="mb-2 d-none">
        <label for="taskDueDate" class="form-label text-white">Due Date</label>
        <input type="date" id="taskDueDate" class="form-control bg-secondary text-white" />
      </div>
      <div id="field-image" class="mb-2 d-none">
        <label for="taskImage" class="form-label text-white">Image Upload</label>
        <input type="file" id="taskImage" accept="image/*" class="form-control bg-secondary text-white" />
      </div>

      <!-- Add Task Button -->
      <button onclick="addTask()" class="btn btn-success w-100 mt-2">Add Task</button>
    </div>
  </div>
</div>

<!-- App entry (must be an ES‑module) -->
<script type="module" src="app.js"></script>
</body>
</html>
